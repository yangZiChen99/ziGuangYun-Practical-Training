# 5月10日实训内容

## SQL基础教程理论学习

**第五章**：

## 课后作业

**第五章课后作业**

**5.1 创建出满足下述三个条件的视图（视图名称为 ViewPractice5_1）。使用 Product（商品）表作为参照表，假设表中包含初始状态的 8 行数据。**

条件 1：销售单价大于等于 1000 日元。

条件 2：登记日期是 2009 年 9 月 20 日。

条件 3：包含商品名称、销售单价和登记日期三列。

对该视图执行 SELECT 语句的结果如下所示。

```sql
CREATE VIEW ViewPractice5_1 AS
SELECT product_name, sale_price, regist_date
 FROM Product
 WHERE sale_price >= 1000
 AND regist_date = '2009-09-20';
```

答：

**5.2 向习题 5.1 中创建的视图 ViewPractice5_1 中插入如下数据，会得到什么样的结果呢？**

```sql
INSERT INTO ViewPractice5_1 VALUES ('刀子', 300, '2009-11-02');
```

答：无法插入

**5.3 请根据如下结果编写 SELECT 语句，其中 sale_price_all 列为全部商品的平均销售单价。**

答：

```sql
SELECT product_id,
 product_name,
 product_type,
 sale_price,
 (SELECT AVG(sale_price) FROM Product) AS sale_price_all
 FROM Product;
```

**5.4 请根据习题 5.1 中的条件编写一条 SQL 语句，创建一幅包含如下数据的视图（名称为 AvgPriceByType）**

答：

```sql
CREATE VIEW AvgPriceByType
AS
SELECT product_id,
 product_name,
 product_type,
 sale_price,
 (SELECT AVG(sale_price)
 FROM Product P2
 WHERE P1.product_type = P2.product_type
 GROUP BY P2.product_type) AS avg_sale_price
 FROM Product P1;
```
